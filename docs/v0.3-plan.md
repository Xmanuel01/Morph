Enkai v0.3 Plan

Scope notes
- No syntax/semantic changes land without updating docs/Enkai.spec first.
- Keep AI primitives as stubs unless a behavior is fully testable.

1) Module exports/import rules (pub/private, re-export)
- Scope: define visibility, re-export rules, and error messages; update docs/Enkai.spec before implementation.
- Default visibility is private; only pub items are importable across module boundaries.
- pub applies to: fn, type, enum, use (re-export). (const is deferred until const exists.)
- Re-export syntax (v0.3): `pub use <module_path>` and `pub use <module_path>::{symbols}`.
- Acceptance tests:
  - Importing a private symbol fails with a visibility error and labeled span.
  - Importing a public symbol succeeds across modules.
  - Re-exported symbols resolve from the re-exporting module path.

2) Policy filters enforcement (domains/path_prefix/etc.)
- Scope: implement domain and path_prefix matching for allow/deny rules with clear precedence.
- Matching rules: domains use suffix match (e.g., `.go.ke`); paths are normalized and compared as prefix (normalize `/` vs `\`, collapse `..`); Windows comparisons are case-insensitive.
- Acceptance tests:
  - allow with matching domain/path_prefix permits access.
  - deny overrides allow when both match.
  - non-matching rules keep default deny behavior.

3) Diagnostics with labeled spans (lightweight)
- Scope: support multiple labeled spans in a single error with caret markers and labels.
- Output contract (example shape):
  - `error: <message>`
  - `--> file:line:col`
  - snippet lines with `|` gutter and caret + label text
- Acceptance tests:
  - Error output includes line, column, snippet, and at least one labeled span.
  - Multi-span error shows two labels on the same snippet when relevant.

4) Local path dependencies in Enkai.toml
- Scope: parse local path deps and resolve modules from those directories.
- TOML schema: `[dependencies]` with `name = { path = "../utils" }`.
- Dependency module root name is the dependency key (e.g., `utils` resolves to that dep's `src/`).
- Acceptance tests:
  - Project with a local path dep runs via `Enkai run .`.
  - Missing or invalid path deps produce a clear diagnostic with snippet.

5) Stdlib growth: strings + fs (capability-gated)
- Scope: add basic string ops and minimal fs read/write; all fs ops require policy allow.
- Acceptance tests:
  - String functions (len/contains/slice) return expected values.
  - fs read/write fails under default deny; succeeds when allowed.

6) AI primitives remain stubs unless fully testable
- Scope: keep tool/agent/prompt/model/memory as parseable stubs; return consistent "not implemented" errors at runtime.
- Acceptance tests:
  - Calling any AI stub yields a deterministic not-implemented runtime error.
  - Policy allow does not bypass stub behavior until fully implemented.

